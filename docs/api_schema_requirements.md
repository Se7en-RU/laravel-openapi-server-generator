## Правила по написанию файлов документации

### 1. Файлы и названия
Важно понимать, что генератором генерируются классы только из
- #/components/schemas/Model
- Отдельных файлов, которые подключены через $ref в индексный файл
Причем название будущего класса будет соответствовать названию файла (транслированному в камельКейс) или названию схемы
Из этого следует, что любой класс, который вы хотите в итоге сгенерировать, должен быть описан в отдельном файле.
Именно в отдельном файле, а не в компонентах, т.к. описывая всё в компонентах мы получим большую нечитаемую кашу. Компоненты будем использовать только для enum (об этом ниже)

### 2. Директории
Все yaml файлы располагаем в папке указаной в конфиге в поле `apidoc_dir`.
Внутри должна быть следующая структура:
`./index.yaml` - Все эндпоинты описываются в одном этом файл. Разделение на несколько корневых файлов не будет работать.
public/api-docs/components/ - Директория под:
Модели апи, которые общие на несколько эндпоинтов и имеет смысл их вынести в отдельный класс. Такие файлы должны иметь название по шаблону {banana}_model.yaml
Enum модели. Такие файлы должны иметь название по шаблону {banana}_enum.yaml
public/api-docs/path/ - Директория под объекты запросов и ответов. В ней располагаются поддиректории, соответствующие тегам. А уже в этих поддиректориях файлы с объектами.

C enum есть 2 проблемы
1. По сути это свойство с типом integer. Но генератором оно генерируется как отдельный класс, из-за того что мы выносим перечисление отдельным файл и потом подключаем везде. И соответственно требует в свойствах в качестве значения этот класс. А мы не может число определить как этот сгенерированный класс.
2. При числовых перечисления класс генерируется с синтаксической ошибкой https://github.com/OpenAPITools/openapi-generator/issues/1475

Для решения этих проблем
1. Под каждый enum создаём файл с названием {banana}_enum.yaml в директории public/api-docs/components/
2. Содержимое файла должно быть следующего вида:
```
type: number
description: >
    Роли. Расшифровка значений:
     * Роли админки:
     * `101` - Супер-администратор
     * `102` - Администратор
     * `113` - Оператор колл-центра
     * `115` - Администратор магазина
     * Роли витрины:
     * `403` - Неавторизованный пользователь
enum:
    - 101 # ADMIN__SUPER | Супер-администратор
    - 102 # ADMIN__ADMIN | Администратор
    - 113 # ADMIN__OMS_CALL_CENTER | Оператор колл-центра
    - 115 # ADMIN__MERCHANT_ADMINISTRATOR | Администратор магазина
    - 403 # SHOWCASE__GUEST | Неавторизованный пользователь
```
Важно заполнение свойства enum. Необходимо четко придерживаться шаблона выше: `- <value> # <name> | <comment>`.  Здесь value -  значение перечисления, name - название, title - комментарий в одну строку.
3. В index.yaml подключаем наш файл в качестве компонента с названием {Banana}Enum и нигде не используем
4. Во всех местах, где наше перечисление должно быть свойством (например order.banana_id), то указываем banana_id просто как числовое поле, БЕЗ enum.

### 3. index.yaml
1. Все объекты запросов и ответов выносятся в отдельные файлы и подключаются напрямую.
2. У всех операций должен быть тег.
3. В #/components/schemas допустимо выносить модели, которые нигде не используются, но хотелось бы получить при генерации под них класс.
